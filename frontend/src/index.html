<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wizyta - nowoczesny wywiad z Powiernikiem</title>
  <meta name="description" content="Wizyta - nowoczesny front + lokalny Powiernik (offline STT i baza)." />
  <meta name="theme-color" content="#0a0f1f" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@500;600;700&family=Onest:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <!-- INLINE_CSS -->
</head>
<body>
  <div class="aura"></div>
  <div class="gridline"></div>

  <header class="site-header">
    <div class="brand">
      <div class="brand-mark">W</div>
      <div class="brand-copy">
        <span class="brand-title">Wizyta</span>
        <span class="brand-sub">Front + Powiernik offline</span>
      </div>
    </div>
    <button class="ghost small" id="service-toggle">Tryb serwisowy</button>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="hero-text">
        <p class="kicker">/wizyta</p>
        <h1>Wywiad medyczny szybciej i czytelniej.</h1>
        <p class="lead">
          Wizyta działa w przeglądarce, a Powiernik lokalnie obsługuje offline STT i bazę.
          Najpierw uruchom Powiernika, potem połącz się z tego panelu.
        </p>
        <div class="hero-actions">
          <a class="primary" id="download-powiernik" href="AsystentSetup.exe" download>
            Pobierz Powiernika (Windows)
          </a>
          <button class="ghost" id="connect-now">Mam już Powiernika → Połącz</button>
        </div>
        <div class="hint">
          Jeśli Windows pokaże SmartScreen, wybierz „Więcej informacji” → „Uruchom mimo to”.
        </div>
        <div class="status-pill" id="status-pill">Brak połączenia</div>
        <div class="status-detail" id="status-detail">Uruchom Powiernika i kliknij „Połącz”.</div>
      </div>

      <div class="hero-card">
        <h2>3 proste kroki</h2>
        <ol class="steps">
          <li><span>1</span><div><strong>Pobierz i zainstaluj Powiernika.</strong></div></li>
          <li><span>2</span><div><strong>Uruchom Powiernika lokalnie.</strong> Otworzy się okno aplikacji.</div></li>
          <li><span>3</span><div><strong>Wróć tu i kliknij „Połącz”.</strong></div></li>
        </ol>
        <div class="card-actions">
          <button class="ghost" id="open-local">Otwórz Powiernika</button>
          <button class="ghost" id="scan-ports">Znajdź Powiernika</button>
        </div>
      </div>
    </section>

    <section class="panel hidden" id="connect-panel" aria-live="polite">
      <h2>Połączenie z Powiernikiem</h2>
      <div class="host-row">
        <input id="host" type="text" value="http://127.0.0.1:8089" spellcheck="false" />
        <button class="ghost" id="save-host">Zapisz</button>
        <button class="primary" id="connect-now-2">Sprawdź połączenie</button>
      </div>
      <p class="hint">
        Jeśli przeglądarka blokuje HTTPS → HTTP, uruchom Powiernika z HTTPS lub użyj lokalnej strony.
      </p>
    </section>

    <section class="panel hidden" id="service-panel">
      <div class="panel-head">
        <h2>Tryb serwisowy</h2>
        <button class="ghost" id="clear-logs">Wyczyść logi frontu</button>
      </div>

      <div class="kv">
        <div>
          <span>Backend</span>
          <strong id="backend-value">-</strong>
        </div>
        <div>
          <span>Model</span>
          <strong id="model-value">-</strong>
        </div>
        <div>
          <span>Urządzenie</span>
          <strong id="device-value">-</strong>
        </div>
        <div>
          <span>Port</span>
          <strong id="port-value">-</strong>
        </div>
      </div>

      <div class="panel-actions">
        <button class="ghost" id="refresh-status">Odśwież status</button>
        <button class="ghost" id="open-health">Otwórz /api/health</button>
        <button class="primary" id="fetch-backend-logs">Pobierz logi hosta</button>
        <button class="ghost" id="copy-debug">Skopiuj paczkę debug</button>
      </div>

      <div class="log-box" id="backend-log-preview">Logi hosta pojawią się tutaj…</div>
      <div class="log-box" id="frontend-log-box"></div>
    </section>
  </main>

  <footer class="site-footer">
    <span>Wizyta © 2026</span>
    <span>GitHub Pages: guziczak.github.io/wizyta</span>
  </footer>

  <!-- INLINE_JS -->
</body>
</html>
